[ 2018-12-14T18:09:49+08:00 ] 223.72.56.190 /index.php/Admin/Index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000018s ]
INFO: [ app_init ] --END-- [ RunTime:0.000320s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000395s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000421s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000103s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000154s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.010530s ]
INFO: [ view_parse ] --END-- [ RunTime:0.010577s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000168s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000188s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000439s ]
INFO: [ app_end ] --END-- [ RunTime:0.000463s ]

[ 2018-12-14T18:09:51+08:00 ] 223.72.56.190 /Admin/Index/welcome
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000059s ]
INFO: [ app_init ] --END-- [ RunTime:0.000427s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000413s ]
INFO: [ app_begin ] --END-- [ RunTime:0.010948s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0034s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` LIMIT 1   [ RunTime:0.0007s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_delete` = 1 LIMIT 1   [ RunTime:0.0013s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_show` = 0 LIMIT 1   [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_chat` [ RunTime:0.0025s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` WHERE `is_delete` = 1 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` WHERE `is_show` = 0 LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_comment` [ RunTime:0.0009s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_comment` LIMIT 1   [ RunTime:0.0020s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000049s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000117s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.005834s ]
INFO: [ view_parse ] --END-- [ RunTime:0.005875s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000130s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000251s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000413s ]
INFO: [ app_end ] --END-- [ RunTime:0.000437s ]

[ 2018-12-14T18:09:52+08:00 ] 223.72.56.190 /Admin/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000020s ]
INFO: [ app_init ] --END-- [ RunTime:0.000332s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000374s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000406s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0007s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0005s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0007s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0012s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000061s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000119s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006060s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006085s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000105s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000125s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000472s ]
INFO: [ app_end ] --END-- [ RunTime:0.000497s ]

[ 2018-12-14T18:11:51+08:00 ] 223.72.56.190 /Admin/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000226s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000336s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000362s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0014s ]
SQL: INSERT INTO `lxp_article` (`cid`,`title`,`author`,`keywords`,`description`,`is_original`,`is_top`,`is_show`,`content`,`click`,`is_delete`,`addtime`) VALUES ('34','关于Mysql的binlog的那些事','鹿晓鹏','','关于Mysql的binlog的那些事','1','1','1','&lt;h2 id=&quot;引言&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;引言&lt;/h2&gt;&lt;h3 id=&quot;为什么写这篇文章&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;为什么写这篇文章?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;大家当年在学MySQL的时候，为了能够迅速就业，一般是学习一下MySQL的基本语法，差不多就出山找工作了。水平稍微好一点的童鞋呢还会懂一点存储过程的编写，又或者是懂一点索引的创建和使用。但是呢，基本上大家都忽略了对底层知识的学习。为什么呢？因为工作中很少用到嘛。然后呢，市面上流传的大部分这种底层的知识，又比较偏运维，研发懂这么多意义也不是太大，很多知识可能这辈子都不会用到。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此，我整理了一部分相关的知识，希望大家有所收获。&lt;/p&gt;&lt;h3 id=&quot;研发究竟要懂哪些&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;研发究竟要懂哪些?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;主要分为两个部分&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;的相关概念&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;怎么解析&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;计划分上下两个部分来叙述。上部分讲述&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog的相关概念&lt;/strong&gt;这部分的知识，我们不需要像运维懂的那么深，我会列举一些常见概念和常见配置，大家匆匆扫一眼，有个概念即可。这样大家以后和运维讨论问题的时候，也不会一脸的懵逼。正所谓&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;懵逼树上懵逼果,懵逼树下你和我。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;懵逼树前排排坐,一人一个懵逼果。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;博主一个人默默的把懵逼果收走独享就好，各位读者还是懂点基本概念，以后方便和运维沟通。下半部分讲&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;怎么解析binlog&lt;/strong&gt;。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这篇文章是给研发大大看的，可能有些概念我理解的也不对，请运维大大轻喷。&lt;/p&gt;&lt;h2 id=&quot;正文&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;正文&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;记得我的&amp;quot;一个定义,两个误解,三个用途,四个常识&amp;quot;&lt;/p&gt;&lt;h3 id=&quot;一个定义&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;一个定义&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;先从定义开始讲起&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;binlog是记录所有数据库表结构变更（例如CREATE、ALTER TABLE…）以及表数据修改（INSERT、UPDATE、DELETE…）的二进制日志。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;binlog不会记录SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改，但你可以通过查询通用日志来查看MySQL执行过的所有语句。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;多说一句，如果&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;update&lt;/code&gt;操作没有造成数据变化，也是会记入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;两个误解&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;两个误解&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解一:binlog只是一类记录操作内容的日志文件&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因为&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;称之为二进制日志，很多研发会把这个&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;二进制日志&lt;/strong&gt;和我们平时在代码里写的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;联系在一起。因为我们的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;，只有一类记录操作容的文件，并不包含索引文件。然而，这个二进制日志包括两类文件：&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;索引文件（文件名后缀为.index）用于记录哪些日志文件正在被使用&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;日志文件（文件名后缀为.00000*）记录数据库所有的DDL和DML(除了数据查询语句)语句事件。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这么说可能还有一点抽象，假设文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;my.cnf&lt;/code&gt;中有这么三条配置&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;log_bin：on&amp;nbsp;打开binlog日志

log_bin_basename：bin文件路径及名前缀（/var/log/mysql/mysql-bin）

log_bin_index：bin文件index（/var/log/mysql/mysql-bin.index）&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么你会在文件目录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;/var/log/mysql/&lt;/code&gt;下面发现两个文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.000001&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;就是我们所说的索引文件，打开瞅瞅，内容是下面这样,记录哪些文件是日志文件。&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;./mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么说到日志文件。在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;里其实又可以分为两部分，一部分在缓存中，一部分在磁盘上。这里业内有一个词叫做&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;，就是指将缓存中的日志刷到磁盘上。跟&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;有关的参数有两个:&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;。这两个参数作用如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;binlog_cache_size:&amp;nbsp;二进制日志缓存部分的大小，默认值32ksync_binlog=[N]:&amp;nbsp;表示写缓冲多少次，刷一次盘,默认值为0&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;注意两点:&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;(1)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设过大，会造成内存浪费。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设置过小，会频繁将缓冲日志写入临时文件。具体怎么设，有兴趣自行查询，我觉得研发大大根本没机会去设这个值的，了解即可。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;(2)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=0&lt;/code&gt;:表示刷新&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;时间点由操作系统自身来决定，操作系统自身会每隔一段时间就会刷新缓存数据到磁盘，这个性能最好。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，代表每次事务提交时就会刷新binlog到磁盘。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;,代表每N个事务提交会进行一次binlog刷新。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这里存在一个一致性问题，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;，数据库在操作系统宕机的时候，可能数据并没有同步到磁盘，于是再次重启数据库，会带来数据丢失问题。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;当&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，事务在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;commit&lt;/code&gt;的时候，数据写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;，但是还没写入事务日志(&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;redo log&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;undo log&lt;/code&gt;)。此时宕机，重启数据库，数据被回滚。但是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;里已经记录，这里存在不一致问题。这个事务日志和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;一致性的问题，大家可以查询mysql的内部XA协议，该协议就是解决这个一致性问题的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解二:binlog是InnoDb独有的&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是以事件形式记录的，这句话通俗点说，就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容都是一个个的事件。这块具体的我会在下一篇讲，这篇记住&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容就是一个个事件就行。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;注意了，这里的用词，是一个个事件，而不是事务。大家应该知道&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Innodb&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysiam&lt;/code&gt;最显著的区别就是一个支持事务，一个不支持事务。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此你可以说，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是基于事务来记录二进制日志，比如&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;,每提交一次事务，就写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。你却不能说&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是事务日志，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;不仅记录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;日志，在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;myisam&lt;/code&gt;中，也一样存在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;三个用途&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;三个用途&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这三个用途，出自《MySQL技术内幕 InnoDB存储引擎》一书，分别为&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;。这三个用途，研发大大们了解一下即可，比如数据恢复，你碰到同事删库的机会实在太少。假如真的有同事舍己为人，冒着离职的风险给你提供做数据&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;的机会，大把运维工程师待命在那，轮不到你的。所以，这三个功能了解即可。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;：这里网上有大把的文章指导你，如何利用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志恢复数据库数据。如果你真的觉得自己很有时间，就自己去创建个库，然后删了，再去恢复一下数据，练练手吧。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;: 如图所示（图片不是自己画的，偷懒了）&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;img src=&quot;https://www.cnblogs.com/images/cnblogs_com/rjzheng/1281019/o_youhua1.jpg&quot; alt=&quot;鹿晓鹏博客&quot; style=&quot;margin: 0px; padding: 0px; border: none; max-width: 800px; height: auto;&quot;/&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;主库有一个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;log dump&lt;/code&gt;线程，将&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;传给从库&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;从库有两个线程，一个I/O线程，一个SQL线程，I/O线程读取主库传过来的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;内容并写入到&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;,SQL线程从&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;里面读取内容，写入从库的数据库。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;：用户可以通过二进制日志中的信息来进行审计，判断是否有对数据库进行注入攻击。&lt;/p&gt;&lt;h3 id=&quot;四个常识&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;四个常识&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识一:binlog常见格式&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;这块知识我用一个表格来表示，没必要啰嗦一大堆。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;format&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;定义&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;优点&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;缺点&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是修改SQL语句&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件小，节约IO，提高性能&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性差，对一些系统函数不能准确复制或不能复制，如now()、uuid()等&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;row&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是每行实际数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，能准确复制数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件大，较大的网络IO和磁盘IO&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;mixed&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement和row模式的混合&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，文件大小适中&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;有可能发生主从不一致问题&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;业内目前推荐使用的是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，准确性高，虽然说文件大，但是现在有SSD和万兆光纤网络，这些磁盘IO和网络IO都是可以接受的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;那么，大家一定想问，为什么不推荐使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mixed&lt;/code&gt;模式，理由如下&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;假设master有两条记录，而slave只有一条记录。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;master的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+------------------------------------------------------+
|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+------------------------------------------------------+
|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
|&amp;nbsp;2&amp;nbsp;|&amp;nbsp;ddd&amp;nbsp;|
+----+------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;slave的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+-------------------------------------------------------+|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+-------------------------------------------------------+|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
+----+-------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;当在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;上更新一条从库不存在的记录时，也就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;id=2&lt;/code&gt;的记录，你会发现&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;是可以执行成功的。而&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;slave&lt;/code&gt;拿到这个SQL后，也会照常执行，不报任何异常，只是更新操作不影响行数而已。并且你执行命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;show slave status&lt;/code&gt;，查看输出，你会发现没有异常。但是，如果你是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，由于这行根本不存在，是会报1062错误的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识二:怎查看binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;本身是一类二进制文件。二进制文件更省空间，写入速度更快，是无法直接打开来查看的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此mysql提供了命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysqlbinlog&lt;/code&gt;进行查看。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;一般的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;statement&lt;/code&gt;格式的二进制文件，用下面命令就可以&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;如果是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;格式，加上&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-v&lt;/code&gt;或者&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-vv&lt;/code&gt;参数就行，如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;-vv&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识三:怎么删binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;删&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的方法很多，有三种是常见的&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(1) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;reset master&lt;/code&gt;,该命令将会删除所有日志，并让日志文件重新从000001开始。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(2) 使用命令&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;PURGE&amp;nbsp;{&amp;nbsp;BINARY&amp;nbsp;|&amp;nbsp;MASTER&amp;nbsp;}&amp;nbsp;LOGS&amp;nbsp;{&amp;nbsp;TO&amp;nbsp;&amp;#39;log_name&amp;#39;&amp;nbsp;|&amp;nbsp;BEFORE&amp;nbsp;datetime_expr&amp;nbsp;}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;例如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;purge&amp;nbsp;master&amp;nbsp;logs&amp;nbsp;to&amp;nbsp;&amp;quot;binlog_name.00000X&amp;quot;&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;将会清空00000X之前的所有日志文件.&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(3) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;--expire_logs_days=N&lt;/code&gt;选项指定过了多少天日志自动过期清空。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识四:binlog常见参数&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;常见参数，列举如下，有个印象就好。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;参数名&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;含义&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin = {on | off | base_name}&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志或者指定一个日志路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sql_log_bin ={ on | off }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;expire_logs_days&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定自动删除二进制日志的时间，即日志过期时间&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin_index&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定mysql-bin.index文件的路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_format = { mixed | row | statement }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志基于什么模式记录&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志文件最大值&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定事务日志缓存区大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志缓存最大大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sync_binlog = { 0 | n }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定写缓冲多少次，刷一次盘&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;思考题&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;思考题&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;请问，我说的&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;一个定义&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;两个误解&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;三个用途&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;四个常识&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;说的是什么呢？&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，我会在下一篇进行介绍，怎么用代码解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志。&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;作者：孤独烟&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;出处：&lt;a href=&quot;http://rjzheng.cnblogs.com/&quot; target=&quot;_blank&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-decoration-line: none;&quot;&gt;&amp;nbsp;http://rjzheng.cnblogs.com/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。如果觉得还有帮助的话，可以点一下右下角的&lt;a style=&quot;margin: 0px; padding: 0px;&quot;&gt;【推荐】&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;','0','0','1544782311') [ RunTime:0.0487s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0021s ]
SQL: INSERT INTO `lxp_article_tag` (`aid`,`tid`) VALUES ('33','26') [ RunTime:0.0119s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0015s ]
SQL: INSERT INTO `lxp_article_pic` (`aid`,`path`) VALUES ('33','/Upload/image/ueditor/mysql.jpg') [ RunTime:0.0055s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0009s ]
SQL: SELECT `aid`,`addtime` FROM `lxp_article` WHERE `is_show` = 1 AND `is_delete` = 0 ORDER BY aid desc  [ RunTime:0.0007s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000039s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000166s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004435s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004469s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000179s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000201s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000463s ]
INFO: [ app_end ] --END-- [ RunTime:0.000485s ]

[ 2018-12-14T18:11:53+08:00 ] 223.72.56.190 /Admin/Article/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000019s ]
INFO: [ app_init ] --END-- [ RunTime:0.000329s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000333s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000366s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0013s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_delete` = 0 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article` WHERE `is_delete` = 0 ORDER BY addtime desc LIMIT 0,15   [ RunTime:0.0158s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0014s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0004s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0005s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 33 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0010s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '32'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 32 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '31'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 31 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0015s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '30'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 30 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '27'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 27 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '26'  [ RunTime:0.0005s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 26 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '25'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 25 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '23'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 23 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 33  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '24'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 24 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '22'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 22 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '21'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 21 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 31  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '20'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 20 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '19'  [ RunTime:0.0005s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 19 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '18'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 18 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0123s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 29  [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000044s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000073s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006013s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006064s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000102s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000122s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000353s ]
INFO: [ app_end ] --END-- [ RunTime:0.000381s ]

[ 2018-12-14T18:12:03+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000252s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000325s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000378s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0104s ]
SQL: SELECT * FROM `lxp_article` WHERE `aid` = 33 LIMIT 1   [ RunTime:0.0008s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0012s ]
SQL: SELECT `tid` FROM `lxp_article_tag` WHERE `aid` = 33  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0006s ]
SQL: SELECT `cid`,`cid`,`cname`,`keywords` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0010s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000065s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000096s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007827s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007860s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000152s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000173s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000358s ]
INFO: [ app_end ] --END-- [ RunTime:0.000386s ]

[ 2018-12-14T18:12:18+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000043s ]
INFO: [ app_init ] --END-- [ RunTime:0.000298s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000367s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000395s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0009s ]
SQL: UPDATE `lxp_article` SET `aid`='33',`cid`='34',`title`='关于Mysql的binlog的那些事（一）',`author`='鹿晓鹏',`keywords`='',`description`='关于Mysql的binlog的那些事',`is_original`='1',`is_top`='1',`is_show`='1',`content`='&lt;h2 id=&quot;引言&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;引言&lt;/h2&gt;&lt;h3 id=&quot;为什么写这篇文章&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;为什么写这篇文章?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;大家当年在学MySQL的时候，为了能够迅速就业，一般是学习一下MySQL的基本语法，差不多就出山找工作了。水平稍微好一点的童鞋呢还会懂一点存储过程的编写，又或者是懂一点索引的创建和使用。但是呢，基本上大家都忽略了对底层知识的学习。为什么呢？因为工作中很少用到嘛。然后呢，市面上流传的大部分这种底层的知识，又比较偏运维，研发懂这么多意义也不是太大，很多知识可能这辈子都不会用到。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此，我整理了一部分相关的知识，希望大家有所收获。&lt;/p&gt;&lt;h3 id=&quot;研发究竟要懂哪些&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;研发究竟要懂哪些?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;主要分为两个部分&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;的相关概念&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;怎么解析&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;计划分上下两个部分来叙述。上部分讲述&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog的相关概念&lt;/strong&gt;这部分的知识，我们不需要像运维懂的那么深，我会列举一些常见概念和常见配置，大家匆匆扫一眼，有个概念即可。这样大家以后和运维讨论问题的时候，也不会一脸的懵逼。正所谓&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;懵逼树上懵逼果,懵逼树下你和我。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;懵逼树前排排坐,一人一个懵逼果。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;博主一个人默默的把懵逼果收走独享就好，各位读者还是懂点基本概念，以后方便和运维沟通。下半部分讲&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;怎么解析binlog&lt;/strong&gt;。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这篇文章是给研发大大看的，可能有些概念我理解的也不对，请运维大大轻喷。&lt;/p&gt;&lt;h2 id=&quot;正文&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;正文&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;记得我的&amp;quot;一个定义,两个误解,三个用途,四个常识&amp;quot;&lt;/p&gt;&lt;h3 id=&quot;一个定义&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;一个定义&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;先从定义开始讲起&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;binlog是记录所有数据库表结构变更（例如CREATE、ALTER TABLE…）以及表数据修改（INSERT、UPDATE、DELETE…）的二进制日志。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;binlog不会记录SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改，但你可以通过查询通用日志来查看MySQL执行过的所有语句。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;多说一句，如果&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;update&lt;/code&gt;操作没有造成数据变化，也是会记入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;两个误解&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;两个误解&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解一:binlog只是一类记录操作内容的日志文件&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因为&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;称之为二进制日志，很多研发会把这个&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;二进制日志&lt;/strong&gt;和我们平时在代码里写的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;联系在一起。因为我们的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;，只有一类记录操作容的文件，并不包含索引文件。然而，这个二进制日志包括两类文件：&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;索引文件（文件名后缀为.index）用于记录哪些日志文件正在被使用&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;日志文件（文件名后缀为.00000*）记录数据库所有的DDL和DML(除了数据查询语句)语句事件。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这么说可能还有一点抽象，假设文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;my.cnf&lt;/code&gt;中有这么三条配置&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;log_bin：on&amp;nbsp;打开binlog日志

log_bin_basename：bin文件路径及名前缀（/var/log/mysql/mysql-bin）

log_bin_index：bin文件index（/var/log/mysql/mysql-bin.index）&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么你会在文件目录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;/var/log/mysql/&lt;/code&gt;下面发现两个文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.000001&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;就是我们所说的索引文件，打开瞅瞅，内容是下面这样,记录哪些文件是日志文件。&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;./mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么说到日志文件。在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;里其实又可以分为两部分，一部分在缓存中，一部分在磁盘上。这里业内有一个词叫做&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;，就是指将缓存中的日志刷到磁盘上。跟&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;有关的参数有两个:&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;。这两个参数作用如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;binlog_cache_size:&amp;nbsp;二进制日志缓存部分的大小，默认值32ksync_binlog=[N]:&amp;nbsp;表示写缓冲多少次，刷一次盘,默认值为0&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;注意两点:&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;(1)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设过大，会造成内存浪费。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设置过小，会频繁将缓冲日志写入临时文件。具体怎么设，有兴趣自行查询，我觉得研发大大根本没机会去设这个值的，了解即可。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;(2)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=0&lt;/code&gt;:表示刷新&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;时间点由操作系统自身来决定，操作系统自身会每隔一段时间就会刷新缓存数据到磁盘，这个性能最好。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，代表每次事务提交时就会刷新binlog到磁盘。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;,代表每N个事务提交会进行一次binlog刷新。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这里存在一个一致性问题，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;，数据库在操作系统宕机的时候，可能数据并没有同步到磁盘，于是再次重启数据库，会带来数据丢失问题。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;当&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，事务在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;commit&lt;/code&gt;的时候，数据写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;，但是还没写入事务日志(&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;redo log&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;undo log&lt;/code&gt;)。此时宕机，重启数据库，数据被回滚。但是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;里已经记录，这里存在不一致问题。这个事务日志和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;一致性的问题，大家可以查询mysql的内部XA协议，该协议就是解决这个一致性问题的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解二:binlog是InnoDb独有的&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是以事件形式记录的，这句话通俗点说，就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容都是一个个的事件。这块具体的我会在下一篇讲，这篇记住&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容就是一个个事件就行。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;注意了，这里的用词，是一个个事件，而不是事务。大家应该知道&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Innodb&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysiam&lt;/code&gt;最显著的区别就是一个支持事务，一个不支持事务。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此你可以说，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是基于事务来记录二进制日志，比如&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;,每提交一次事务，就写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。你却不能说&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是事务日志，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;不仅记录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;日志，在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;myisam&lt;/code&gt;中，也一样存在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;三个用途&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;三个用途&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这三个用途，出自《MySQL技术内幕 InnoDB存储引擎》一书，分别为&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;。这三个用途，研发大大们了解一下即可，比如数据恢复，你碰到同事删库的机会实在太少。假如真的有同事舍己为人，冒着离职的风险给你提供做数据&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;的机会，大把运维工程师待命在那，轮不到你的。所以，这三个功能了解即可。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;：这里网上有大把的文章指导你，如何利用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志恢复数据库数据。如果你真的觉得自己很有时间，就自己去创建个库，然后删了，再去恢复一下数据，练练手吧。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;: 如图所示（图片不是自己画的，偷懒了）&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;img src=&quot;https://www.cnblogs.com/images/cnblogs_com/rjzheng/1281019/o_youhua1.jpg&quot; alt=&quot;鹿晓鹏博客&quot; style=&quot;margin: 0px; padding: 0px; border: none; max-width: 800px; height: auto;&quot;/&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;主库有一个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;log dump&lt;/code&gt;线程，将&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;传给从库&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;从库有两个线程，一个I/O线程，一个SQL线程，I/O线程读取主库传过来的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;内容并写入到&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;,SQL线程从&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;里面读取内容，写入从库的数据库。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;：用户可以通过二进制日志中的信息来进行审计，判断是否有对数据库进行注入攻击。&lt;/p&gt;&lt;h3 id=&quot;四个常识&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;四个常识&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识一:binlog常见格式&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;这块知识我用一个表格来表示，没必要啰嗦一大堆。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;format&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;定义&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;优点&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;缺点&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是修改SQL语句&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件小，节约IO，提高性能&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性差，对一些系统函数不能准确复制或不能复制，如now()、uuid()等&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;row&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是每行实际数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，能准确复制数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件大，较大的网络IO和磁盘IO&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;mixed&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement和row模式的混合&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，文件大小适中&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;有可能发生主从不一致问题&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;业内目前推荐使用的是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，准确性高，虽然说文件大，但是现在有SSD和万兆光纤网络，这些磁盘IO和网络IO都是可以接受的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;那么，大家一定想问，为什么不推荐使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mixed&lt;/code&gt;模式，理由如下&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;假设master有两条记录，而slave只有一条记录。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;master的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+------------------------------------------------------+
|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+------------------------------------------------------+
|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
|&amp;nbsp;2&amp;nbsp;|&amp;nbsp;ddd&amp;nbsp;|
+----+------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;slave的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+-------------------------------------------------------+|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+-------------------------------------------------------+|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
+----+-------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;当在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;上更新一条从库不存在的记录时，也就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;id=2&lt;/code&gt;的记录，你会发现&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;是可以执行成功的。而&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;slave&lt;/code&gt;拿到这个SQL后，也会照常执行，不报任何异常，只是更新操作不影响行数而已。并且你执行命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;show slave status&lt;/code&gt;，查看输出，你会发现没有异常。但是，如果你是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，由于这行根本不存在，是会报1062错误的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识二:怎查看binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;本身是一类二进制文件。二进制文件更省空间，写入速度更快，是无法直接打开来查看的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此mysql提供了命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysqlbinlog&lt;/code&gt;进行查看。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;一般的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;statement&lt;/code&gt;格式的二进制文件，用下面命令就可以&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;如果是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;格式，加上&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-v&lt;/code&gt;或者&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-vv&lt;/code&gt;参数就行，如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;-vv&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识三:怎么删binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;删&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的方法很多，有三种是常见的&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(1) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;reset master&lt;/code&gt;,该命令将会删除所有日志，并让日志文件重新从000001开始。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(2) 使用命令&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;PURGE&amp;nbsp;{&amp;nbsp;BINARY&amp;nbsp;|&amp;nbsp;MASTER&amp;nbsp;}&amp;nbsp;LOGS&amp;nbsp;{&amp;nbsp;TO&amp;nbsp;&amp;#39;log_name&amp;#39;&amp;nbsp;|&amp;nbsp;BEFORE&amp;nbsp;datetime_expr&amp;nbsp;}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;例如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;purge&amp;nbsp;master&amp;nbsp;logs&amp;nbsp;to&amp;nbsp;&amp;quot;binlog_name.00000X&amp;quot;&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;将会清空00000X之前的所有日志文件.&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(3) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;--expire_logs_days=N&lt;/code&gt;选项指定过了多少天日志自动过期清空。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识四:binlog常见参数&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;常见参数，列举如下，有个印象就好。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;参数名&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;含义&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin = {on | off | base_name}&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志或者指定一个日志路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sql_log_bin ={ on | off }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;expire_logs_days&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定自动删除二进制日志的时间，即日志过期时间&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin_index&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定mysql-bin.index文件的路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_format = { mixed | row | statement }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志基于什么模式记录&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志文件最大值&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定事务日志缓存区大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志缓存最大大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sync_binlog = { 0 | n }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定写缓冲多少次，刷一次盘&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;思考题&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;思考题&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;请问，我说的&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;一个定义&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;两个误解&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;三个用途&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;四个常识&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;说的是什么呢？&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，我会在下一篇进行介绍，怎么用代码解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志。&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;作者：孤独烟&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;出处：&lt;a href=&quot;http://rjzheng.cnblogs.com/&quot; target=&quot;_blank&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-decoration-line: none;&quot;&gt;&amp;nbsp;http://rjzheng.cnblogs.com/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。如果觉得还有帮助的话，可以点一下右下角的&lt;a style=&quot;margin: 0px; padding: 0px;&quot;&gt;【推荐】&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' WHERE `aid` = 33 [ RunTime:0.0073s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0012s ]
SQL: DELETE FROM `lxp_article_tag` WHERE `aid` = 33 [ RunTime:0.0072s ]
SQL: INSERT INTO `lxp_article_tag` (`aid`,`tid`) VALUES ('33','26') [ RunTime:0.0026s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0025s ]
SQL: DELETE FROM `lxp_article_pic` WHERE `aid` = 33 [ RunTime:0.0066s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000031s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000066s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004389s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004418s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000099s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000118s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000446s ]
INFO: [ app_end ] --END-- [ RunTime:0.000468s ]

[ 2018-12-14T18:12:19+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000018s ]
INFO: [ app_init ] --END-- [ RunTime:0.000297s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000395s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000435s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0013s ]
SQL: SELECT * FROM `lxp_article` WHERE `aid` = 33 LIMIT 1   [ RunTime:0.0005s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0010s ]
SQL: SELECT `tid` FROM `lxp_article_tag` WHERE `aid` = 33  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0006s ]
SQL: SELECT `cid`,`cid`,`cname`,`keywords` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0012s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000080s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000116s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006188s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006228s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000199s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000225s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000372s ]
INFO: [ app_end ] --END-- [ RunTime:0.000400s ]

[ 2018-12-14T18:13:29+08:00 ] 223.72.56.190 /Admin/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000277s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000308s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000334s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0028s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0006s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000056s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000088s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004875s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004906s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000128s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000205s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000326s ]
INFO: [ app_end ] --END-- [ RunTime:0.000351s ]

[ 2018-12-14T18:14:44+08:00 ] 223.72.56.190 /Admin/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000008s ]
INFO: [ app_init ] --END-- [ RunTime:0.000273s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000278s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000304s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0011s ]
SQL: INSERT INTO `lxp_article` (`cid`,`title`,`author`,`keywords`,`description`,`is_original`,`is_top`,`is_show`,`content`,`click`,`is_delete`,`addtime`) VALUES ('34','关于Mysql的binlog的那些事（二）','鹿晓鹏','mysql，binlog，php，高并发，数据库优化','关于Mysql的binlog的那些事（二）','1','1','1','&lt;h2 id=&quot;引言&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;引言&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这篇是&lt;a href=&quot;https://www.cnblogs.com/rjzheng/p/9721765.html&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0);&quot;&gt;《研发应该懂的binlog知识(一)》&lt;/a&gt;的下半部分。在本文，我会阐述一下&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的结构，以及如何使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;java&lt;/code&gt;来解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;不过，话说回来，其实严格意义上来说，研发应该还需要懂&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;如何监听binlog的变化&lt;/strong&gt;。我本来也想写这块的知识，但是后来发现，这块讲起来篇幅过长，需要从&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql&lt;/code&gt;的通讯协议开始讲起，实在是不适合放在这篇文章讲，所以改天抽时间再写一篇监听&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;变化的文章。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;说到这里，大家可能有一个疑问:&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;研发为什么要懂得如何解析binlog?&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;说句实在话，如果在实际项目中遇到，我确实推荐使用现成的jar包来解析，比如&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-binlog-connector-java&lt;/code&gt;或者&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;open-replicator&lt;/code&gt;等。但是呢，这类jar包解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的原理都是差不多的。因为我有一个怪癖，我用一个jar包，都会去溜几眼，看一下大致原理，所以想在这个部分把如何解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的实质性原理讲出来，希望大家有所收获。大家懂一个大概的原理即可，不需要自己再去造轮子。另外，注意了，本文教你的是解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的方法，不可能每一个事件带你解析一遍。能达到举一反三的效果，就是本文的目的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;什么，你还没碰到过解析binlog的需求？&lt;/strong&gt;没事，那先看着，就当学习一下，将来一定会遇到。&lt;/p&gt;&lt;h2 id=&quot;正文&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;正文&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;先说一下，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的结构。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;文件头由一个四字节&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Magic Number&lt;/code&gt;构成，其值为1852400382，在内存中就是&amp;quot;0xfe,0x62,0x69,0x6e&amp;quot;。这个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Magic Number&lt;/code&gt;就是来验证这个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;文件是否有效 。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;引一个题外话&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;java里头的class文件，头四个字节的Magic Number是多少？&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;回答：&amp;quot;0xCAFEBABE。&amp;quot;这个数字可能比较难记，记(咖啡宝贝)就好。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;下面写个程序，读一份&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;文件，给大家&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;看看头四个字节是否为&amp;quot;0xfe,0x62,0x69,0x6e&amp;quot;，代码如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;public&amp;nbsp;class&amp;nbsp;MagicParser&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;final&amp;nbsp;byte[]&amp;nbsp;MAGIC_HEADER&amp;nbsp;=&amp;nbsp;new&amp;nbsp;byte[]{(byte)&amp;nbsp;0xfe,&amp;nbsp;(byte)&amp;nbsp;0x62,&amp;nbsp;(byte)&amp;nbsp;0x69,&amp;nbsp;(byte)&amp;nbsp;0x6e};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;void&amp;nbsp;main(String[]&amp;nbsp;args)throws&amp;nbsp;Exception&amp;nbsp;{
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;filePath&amp;nbsp;=&amp;nbsp;&amp;quot;D:\\\\mysql-bin.000001&amp;quot;;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;binlogFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(filePath);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ByteArrayInputStream&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;null;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ByteArrayInputStream(new&amp;nbsp;FileInputStream(binlogFile));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[]&amp;nbsp;magicHeader&amp;nbsp;=&amp;nbsp;inputStream.read(4);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(&amp;quot;魔数\\\\xfe\\\\x62\\\\x69\\\\x6e是否正确:&amp;quot;+Arrays.equals(MAGIC_HEADER,&amp;nbsp;magicHeader));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;输出如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;魔数\\xfe\\x62\\x69\\x6e是否正确:true&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;在文件头之后，跟随的是一个一个事件依次排列。在&lt;a href=&quot;https://mp.weixin.qq.com/s/j987HNc74gRYHl6au24XSg&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0);&quot;&gt;《binlog二进制文件解析》&lt;/a&gt;一文中，将其分为三个部分:通用事件头（common-header）、私有事件头（post-header）和事件体（event-body）。本文修改了一下，只用两个Java类来修饰&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;中的事件，即&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventHeader&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventData&lt;/code&gt;。可以理解为下述的对应关系：&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;EventHeader&amp;nbsp;--&amp;gt;&amp;nbsp;通用事件头（common-header)
EventData&amp;nbsp;---&amp;gt;&amp;nbsp;私有事件头（post-header）和事件体（event-body）&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;于是，你们可以把Binlog的文件结构像下面这么理解&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;img src=&quot;https://www.cnblogs.com/images/cnblogs_com/rjzheng/1281019/o_binlog22.png&quot; alt=&quot;鹿晓鹏博客&quot; style=&quot;margin: 0px; padding: 0px; border: none; max-width: 800px; height: auto;&quot;/&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;说一下这个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Checksum&lt;/code&gt;,在获取event内容的时候，会增加4个额外字节做校验用。mysql5.6.5以后的版本中binlog_checksum=crc32,而低版本都是binlog_checksum=none。如果不想校验，可以使用set命令设置set binlog_checksum=none。说得再通俗一点，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Checksum&lt;/code&gt;要么为4个字节，要么为0个字节。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;下面说一下通用事件头的结构，如下所示&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;属性&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;字节数&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;含义&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;timestamp&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;4&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;包含了该事件的开始执行时间&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;eventType&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;1&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;事件类型&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;serverId&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;4&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;标识产生该事件的MySQL服务器的server-id&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;eventLength&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;4&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;该事件的长度(Header+Data+CheckSum)&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;nextPosition&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;4&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;下一个事件在binlog文件中的位置&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;flags&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;2&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;标识产生该事件的MySQL服务器的server-id。&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;从上表可以看出，EventHeader固定为19个字节，为此我们构造下面的类，来解析这个通用事件头&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;public&amp;nbsp;class&amp;nbsp;EventHeader&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;long&amp;nbsp;timestamp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;int&amp;nbsp;eventType;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;long&amp;nbsp;serverId;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;long&amp;nbsp;eventLength;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;long&amp;nbsp;nextPosition;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;int&amp;nbsp;flags;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//省略setter和getter方法
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Override
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;String&amp;nbsp;toString()&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final&amp;nbsp;StringBuilder&amp;nbsp;sb&amp;nbsp;=&amp;nbsp;new&amp;nbsp;StringBuilder();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;EventHeader&amp;quot;);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;{timestamp=&amp;quot;).append(timestamp);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;eventType=&amp;quot;).append(eventType);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;serverId=&amp;quot;).append(serverId);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;eventLength=&amp;quot;).append(eventLength);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;nextPosition=&amp;quot;).append(nextPosition);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;flags=&amp;quot;).append(flags);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;#39;}&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;sb.toString();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;OK，接下来，我们来一段代码试着解析一下第一个事件的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventHeader&lt;/code&gt;,代码如下所示&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;public&amp;nbsp;class&amp;nbsp;HeaderParser&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;final&amp;nbsp;byte[]&amp;nbsp;MAGIC_HEADER&amp;nbsp;=&amp;nbsp;new&amp;nbsp;byte[]{(byte)&amp;nbsp;0xfe,&amp;nbsp;(byte)&amp;nbsp;0x62,&amp;nbsp;(byte)&amp;nbsp;0x69,&amp;nbsp;(byte)&amp;nbsp;0x6e};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;void&amp;nbsp;main(String[]&amp;nbsp;args)throws&amp;nbsp;Exception&amp;nbsp;{
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;filePath&amp;nbsp;=&amp;nbsp;&amp;quot;D:\\\\mysql-bin.000001&amp;quot;;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;binlogFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(filePath);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ByteArrayInputStream&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;null;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ByteArrayInputStream(new&amp;nbsp;FileInputStream(binlogFile));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[]&amp;nbsp;magicHeader&amp;nbsp;=&amp;nbsp;inputStream.read(4);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(!Arrays.equals(MAGIC_HEADER,&amp;nbsp;magicHeader)){&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;RuntimeException(&amp;quot;binlog文件格式不对&amp;quot;);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;EventHeader&amp;nbsp;eventHeader&amp;nbsp;=&amp;nbsp;new&amp;nbsp;EventHeader();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setTimestamp(inputStream.readLong(4)&amp;nbsp;*&amp;nbsp;1000L);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setEventType(inputStream.readInteger(1));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setServerId(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setEventLength(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setNextPosition(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setFlags(inputStream.readInteger(2));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(eventHeader);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;输出如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;EventHeader{timestamp=1536487335000,&amp;nbsp;eventType=15,&amp;nbsp;serverId=1,&amp;nbsp;eventLength=119,&amp;nbsp;nextPosition=123,&amp;nbsp;flags=1}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;注意看，两个参数&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;eventLength=119nextPosition=123&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;下一个事件从123字节开始。这是怎么算的呢，当前事件长度是是119字节，算上最开始4个字节的魔数占位符，那么下一个事件自然是,119+4=123，从123字节开始。&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;再强调一次&lt;/strong&gt;，这个119字节，是包含&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventHeader&lt;/code&gt;,&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventData&lt;/code&gt;,&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Checksum&lt;/code&gt;,三个部分的长度为119。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;最重要的一个参数&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;eventType=15&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;我们去下面的地址&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;https://dev.mysql.com/doc/internals/en/binlog-event-type.html&lt;/code&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;查询一下，15对应的事件类型为&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;FORMAT_DESCRIPTION_EVENT&lt;/code&gt;。我们接下来，需要知道&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;FORMAT_DESCRIPTION_EVENT&lt;/code&gt;所对应&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventData&lt;/code&gt;的结构。在下面的地址&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;https://dev.mysql.com/doc/internals/en/format-description-event.html&lt;/code&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;查询得到&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;EventData&lt;/code&gt;的结构对应如下表所示&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;属性&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;字节数&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;含义&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlogVersion&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;2&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog版本&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;serverVersion&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;50&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;服务器版本&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;timestamp&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;4&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;该字段指明该binlog文件的创建时间。&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;headerLength&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;1&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;事件头长度，为19&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;headerArrays&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;n&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;一个数组，标识所有事件的私有事件头的长度&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;ps:这个n其实我们可以推算出，为39。事件长度为119字节，减去事件头19字节，减去末位的4字节(末位四个字节循环校验码)，减去2个字节的binlog版本，减去50个字节的服务器版本号，减去4个字节的时间戳，减去1个字节的事件头长度。得到如下算式&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;span class=&quot;math display&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;MathJax&quot; id=&quot;MathJax-Element-1-Frame&quot; tabindex=&quot;0&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot; display=&amp;quot;block&amp;quot;&amp;gt;&amp;lt;mn&amp;gt;119&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;19&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;4&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;2&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;50&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;4&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;39&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot; role=&quot;presentation&quot; style=&quot;margin: 0px; padding: 0px; display: inline; line-height: normal; font-size: 15px; word-spacing: normal; overflow-wrap: normal; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; position: relative;&quot;&gt;&lt;nobr aria-hidden=&quot;true&quot; style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; border: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; vertical-align: 0px; line-height: normal;&quot;&gt;&lt;span class=&quot;math&quot; id=&quot;MathJax-Span-1&quot; style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline-block; position: static; border: 0px; vertical-align: 0px; line-height: normal; width: 18.829em;&quot;&gt;&lt;span style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline-block; position: relative; border: 0px; vertical-align: 0px; line-height: normal; width: 15.043em; height: 0px; font-size: 18.75px;&quot;&gt;&lt;span style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; position: absolute; border: 0px; vertical-align: 0px; line-height: normal; clip: rect(1.496em, 1014.99em, 2.616em, -999.997em); top: -2.344em; left: 0em;&quot;&gt;&lt;span class=&quot;mrow&quot; id=&quot;MathJax-Span-2&quot; style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal;&quot;&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-3&quot; style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;119&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-4&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-5&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-6&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-7&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-8&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-9&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-10&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-11&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-12&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-13&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-14&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;−&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-15&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.216em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mo&quot; id=&quot;MathJax-Span-16&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.269em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mn&quot; id=&quot;MathJax-Span-17&quot; style=&quot;margin: 0px; padding: 0px 0px 0px 0.269em; transition: none 0s ease 0s; display: inline; position: static; border: 0px; vertical-align: 0px; line-height: normal; font-family: MathJax_Main;&quot;&gt;39&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline-block; position: static; border: 0px; vertical-align: 0px; line-height: normal; width: 0px; height: 2.349em;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px; transition: none 0s ease 0s; display: inline-block; position: static; border-width: 0px; border-top-style: initial; border-right-style: initial; border-bottom-style: initial; border-left-style: solid; border-color: initial; border-image: initial; vertical-align: -0.197em; line-height: normal; overflow: hidden; width: 0px; height: 1.07em;&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/nobr&gt;&lt;span class=&quot;MJX_Assistive_MathML MJX_Assistive_MathML_Block&quot; role=&quot;presentation&quot; style=&quot;margin: 0px; padding: 0px; top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); user-select: none; position: static; border: 0px; width: 282.422px; display: inline; transition: none 0s ease 0s; vertical-align: 0px; line-height: normal; height: 1px !important; overflow: hidden !important;&quot;&gt;&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mn&gt;119&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;19&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;50&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;39&lt;/mn&gt;&lt;/math&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;不过，我们还是假装不知道n是多少吧。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;根据上表结构 ，我们给出一个JAVA类如下所示&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;public&amp;nbsp;class&amp;nbsp;FormatDescriptionEventData&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;int&amp;nbsp;binlogVersion;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;String&amp;nbsp;serverVersion;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;long&amp;nbsp;timestamp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;int&amp;nbsp;headerLength;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;List&amp;nbsp;headerArrays&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList&amp;lt;Integer&amp;gt;();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//省略setter和getter方法
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Override
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;String&amp;nbsp;toString()&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;final&amp;nbsp;StringBuilder&amp;nbsp;sb&amp;nbsp;=&amp;nbsp;new&amp;nbsp;StringBuilder();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;FormatDescriptionEventData&amp;quot;);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;{binlogVersion=&amp;quot;).append(binlogVersion);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;serverVersion=&amp;quot;).append(serverVersion);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;timestamp=&amp;quot;).append(timestamp);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;headerLength=&amp;quot;).append(headerLength);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;quot;,&amp;nbsp;headerArrays=&amp;quot;).append(headerArrays);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sb.append(&amp;#39;}&amp;#39;);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;sb.toString();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;&amp;nbsp;
}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那如何解析呢，如下所示&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;public&amp;nbsp;class&amp;nbsp;HeaderParser&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;final&amp;nbsp;byte[]&amp;nbsp;MAGIC_HEADER&amp;nbsp;=&amp;nbsp;new&amp;nbsp;byte[]&amp;nbsp;{&amp;nbsp;(byte)&amp;nbsp;0xfe,
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(byte)&amp;nbsp;0x62,&amp;nbsp;(byte)&amp;nbsp;0x69,&amp;nbsp;(byte)&amp;nbsp;0x6e&amp;nbsp;};&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;void&amp;nbsp;main(String[]&amp;nbsp;args)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;filePath&amp;nbsp;=&amp;nbsp;&amp;quot;D:\\\\mysql-bin.000001&amp;quot;;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;binlogFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(filePath);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ByteArrayInputStream&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;null;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inputStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ByteArrayInputStream(new&amp;nbsp;FileInputStream(binlogFile));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;byte[]&amp;nbsp;magicHeader&amp;nbsp;=&amp;nbsp;inputStream.read(4);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(!Arrays.equals(MAGIC_HEADER,&amp;nbsp;magicHeader))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;RuntimeException(&amp;quot;binlog文件格式不对&amp;quot;);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;EventHeader&amp;nbsp;eventHeader&amp;nbsp;=&amp;nbsp;new&amp;nbsp;EventHeader();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setTimestamp(inputStream.readLong(4)&amp;nbsp;*&amp;nbsp;1000L);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setEventType(inputStream.readInteger(1));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setServerId(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setEventLength(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setNextPosition(inputStream.readLong(4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;eventHeader.setFlags(inputStream.readInteger(2));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(eventHeader);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inputStream.enterBlock((int)&amp;nbsp;(eventHeader.getEventLength()&amp;nbsp;-&amp;nbsp;19&amp;nbsp;-&amp;nbsp;4));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FormatDescriptionEventData&amp;nbsp;descriptionEventData&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FormatDescriptionEventData();
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptionEventData.setBinlogVersion(inputStream.readInteger(2));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptionEventData.setServerVersion(inputStream.readString(50).trim());
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptionEventData.setTimestamp(inputStream.readLong(4)&amp;nbsp;*&amp;nbsp;1000L);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptionEventData.setHeaderLength(inputStream.readInteger(1));&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&amp;nbsp;sums&amp;nbsp;=&amp;nbsp;inputStream.available();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for&amp;nbsp;(int&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0;&amp;nbsp;i&amp;nbsp;&amp;lt;&amp;nbsp;sums;&amp;nbsp;i++)&amp;nbsp;{
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;descriptionEventData.getHeaderArrays().add(inputStream.readInteger(1));
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(descriptionEventData);
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;至于输出，就不给大家看了，没啥意思。大家看&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;headerArrays&lt;/code&gt;的值即可，如下所示&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;headerArrays=[56,&amp;nbsp;13,&amp;nbsp;0,&amp;nbsp;8,&amp;nbsp;0,&amp;nbsp;18,&amp;nbsp;0,&amp;nbsp;4,&amp;nbsp;4,&amp;nbsp;4,&amp;nbsp;4,&amp;nbsp;18,&amp;nbsp;0,&amp;nbsp;0,&amp;nbsp;95,&amp;nbsp;0,&amp;nbsp;4,&amp;nbsp;26,&amp;nbsp;8,&amp;nbsp;0,&amp;nbsp;0,&amp;nbsp;0,&amp;nbsp;8,&amp;nbsp;8,&amp;nbsp;8,&amp;nbsp;2,&amp;nbsp;0,&amp;nbsp;0,&amp;nbsp;0,&amp;nbsp;10,&amp;nbsp;10,&amp;nbsp;10,&amp;nbsp;42,&amp;nbsp;42,&amp;nbsp;0,&amp;nbsp;18,&amp;nbsp;52,&amp;nbsp;0,&amp;nbsp;1]&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;其实他所输出的值，可以在地址&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;https://dev.mysql.com/doc/internals/en/format-description-event.html&lt;/code&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;查询到，该页有一个表格如下所示，其中我红圈的地方，就是私有事件头的长度，即&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;img src=&quot;https://www.cnblogs.com/images/cnblogs_com/rjzheng/1281019/o_binlog5.png&quot; alt=&quot;鹿晓鹏博客&quot; style=&quot;margin: 0px; padding: 0px; border: none; max-width: 800px; height: auto;&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;总结&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;总结&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;关于其他事件的结构体，大家可以自行去网站查询，解析原理都是一样的。&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;作者：孤独烟&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;出处：&lt;a href=&quot;http://rjzheng.cnblogs.com/&quot; target=&quot;_blank&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-decoration-line: none;&quot;&gt;&amp;nbsp;http://rjzheng.cnblogs.com/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。如果觉得还有帮助的话，可以点一下右下角的&lt;a style=&quot;margin: 0px; padding: 0px;&quot;&gt;【推荐】&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;','0','0','1544782484') [ RunTime:0.0119s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0007s ]
SQL: INSERT INTO `lxp_article_tag` (`aid`,`tid`) VALUES ('34','26') [ RunTime:0.0124s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0015s ]
SQL: INSERT INTO `lxp_article_pic` (`aid`,`path`) VALUES ('34','/Upload/image/ueditor/mysql.jpg') [ RunTime:0.0046s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0010s ]
SQL: SELECT `aid`,`addtime` FROM `lxp_article` WHERE `is_show` = 1 AND `is_delete` = 0 ORDER BY aid desc  [ RunTime:0.0028s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000028s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000066s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004660s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004715s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000098s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000117s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000425s ]
INFO: [ app_end ] --END-- [ RunTime:0.000447s ]

[ 2018-12-14T18:14:46+08:00 ] 223.72.56.190 /Admin/Article/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000008s ]
INFO: [ app_init ] --END-- [ RunTime:0.000250s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000310s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000335s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0014s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_delete` = 0 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article` WHERE `is_delete` = 0 ORDER BY addtime desc LIMIT 0,15   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0013s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '34'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0005s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 34 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0011s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 33 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '32'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 32 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '31'  [ RunTime:0.0002s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 31 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '30'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 30 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '27'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 27 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '26'  [ RunTime:0.0006s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 26 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0004s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '25'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 25 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '23'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 23 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 33  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '24'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 24 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '22'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 22 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '21'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 21 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 31  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '20'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 20 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '19'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 19 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '18'  [ RunTime:0.0005s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 18 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 29  [ RunTime:0.0136s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000049s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000092s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007799s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007831s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000141s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000161s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000384s ]
INFO: [ app_end ] --END-- [ RunTime:0.000412s ]

[ 2018-12-14T18:34:35+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000234s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000331s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000357s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0047s ]
SQL: SELECT * FROM `lxp_article` WHERE `aid` = 33 LIMIT 1   [ RunTime:0.0046s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0008s ]
SQL: SELECT `tid` FROM `lxp_article_tag` WHERE `aid` = 33  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0016s ]
SQL: SELECT `cid`,`cid`,`cname`,`keywords` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0008s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000080s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000125s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007259s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007291s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000114s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000140s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000361s ]
INFO: [ app_end ] --END-- [ RunTime:0.000389s ]

[ 2018-12-14T18:34:41+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000265s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000327s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000353s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0041s ]
SQL: UPDATE `lxp_article` SET `aid`='33',`cid`='34',`title`='关于Mysql的binlog的那些事（一）',`author`='鹿晓鹏',`keywords`='',`description`='关于Mysql的binlog的那些事',`is_original`='1',`is_top`='1',`is_show`='1',`content`='&lt;h2 id=&quot;引言&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;引言&lt;/h2&gt;&lt;h3 id=&quot;为什么写这篇文章&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;为什么写这篇文章?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;大家当年在学MySQL的时候，为了能够迅速就业，一般是学习一下MySQL的基本语法，差不多就出山找工作了。水平稍微好一点的童鞋呢还会懂一点存储过程的编写，又或者是懂一点索引的创建和使用。但是呢，基本上大家都忽略了对底层知识的学习。为什么呢？因为工作中很少用到嘛。然后呢，市面上流传的大部分这种底层的知识，又比较偏运维，研发懂这么多意义也不是太大，很多知识可能这辈子都不会用到。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此，我整理了一部分相关的知识，希望大家有所收获。&lt;/p&gt;&lt;h3 id=&quot;研发究竟要懂哪些&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;研发究竟要懂哪些?&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;主要分为两个部分&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;的相关概念&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;怎么解析&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;计划分上下两个部分来叙述。上部分讲述&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;binlog的相关概念&lt;/strong&gt;这部分的知识，我们不需要像运维懂的那么深，我会列举一些常见概念和常见配置，大家匆匆扫一眼，有个概念即可。这样大家以后和运维讨论问题的时候，也不会一脸的懵逼。正所谓&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;懵逼树上懵逼果,懵逼树下你和我。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;懵逼树前排排坐,一人一个懵逼果。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;博主一个人默默的把懵逼果收走独享就好，各位读者还是懂点基本概念，以后方便和运维沟通。下半部分讲&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;怎么解析binlog&lt;/strong&gt;。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这篇文章是给研发大大看的，可能有些概念我理解的也不对，请运维大大轻喷。&lt;/p&gt;&lt;h2 id=&quot;正文&quot; style=&quot;margin: 20px 0px 35px; padding: 0px; font-size: 2em; line-height: 1.5; border-bottom: 2px solid rgb(63, 63, 63);&quot;&gt;正文&lt;/h2&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;记得我的&amp;quot;一个定义,两个误解,三个用途,四个常识&amp;quot;&lt;/p&gt;&lt;h3 id=&quot;一个定义&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;一个定义&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;先从定义开始讲起&lt;/p&gt;&lt;blockquote style=&quot;margin: 0px; padding: 5px 10px; background: aliceblue; border-top: none; border-right: none; border-bottom: none; border-left: 5px solid rgb(50, 113, 230); border-image: initial;&quot;&gt;&lt;p style=&quot;margin-top: 0px; margin-bottom: 0px; padding: 0px; color: rgb(119, 119, 119); font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px; color: cornflowerblue;&quot;&gt;binlog是记录所有数据库表结构变更（例如CREATE、ALTER TABLE…）以及表数据修改（INSERT、UPDATE、DELETE…）的二进制日志。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;binlog不会记录SELECT和SHOW这类操作，因为这类操作对数据本身并没有修改，但你可以通过查询通用日志来查看MySQL执行过的所有语句。&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;多说一句，如果&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;update&lt;/code&gt;操作没有造成数据变化，也是会记入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;两个误解&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;两个误解&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解一:binlog只是一类记录操作内容的日志文件&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因为&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;称之为二进制日志，很多研发会把这个&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;二进制日志&lt;/strong&gt;和我们平时在代码里写的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;联系在一起。因为我们的&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;代码日志&lt;/strong&gt;，只有一类记录操作容的文件，并不包含索引文件。然而，这个二进制日志包括两类文件：&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;索引文件（文件名后缀为.index）用于记录哪些日志文件正在被使用&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;日志文件（文件名后缀为.00000*）记录数据库所有的DDL和DML(除了数据查询语句)语句事件。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这么说可能还有一点抽象，假设文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;my.cnf&lt;/code&gt;中有这么三条配置&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;log_bin：on&amp;nbsp;打开binlog日志

log_bin_basename：bin文件路径及名前缀（/var/log/mysql/mysql-bin）

log_bin_index：bin文件index（/var/log/mysql/mysql-bin.index）&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么你会在文件目录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;/var/log/mysql/&lt;/code&gt;下面发现两个文件&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.000001&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysql-bin.index&lt;/code&gt;就是我们所说的索引文件，打开瞅瞅，内容是下面这样,记录哪些文件是日志文件。&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;./mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;那么说到日志文件。在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;里其实又可以分为两部分，一部分在缓存中，一部分在磁盘上。这里业内有一个词叫做&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;，就是指将缓存中的日志刷到磁盘上。跟&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;刷盘&lt;/strong&gt;有关的参数有两个:&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;。这两个参数作用如下&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;binlog_cache_size:&amp;nbsp;二进制日志缓存部分的大小，默认值32ksync_binlog=[N]:&amp;nbsp;表示写缓冲多少次，刷一次盘,默认值为0&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;注意两点:&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;(1)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设过大，会造成内存浪费。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog_cache_size&lt;/code&gt;设置过小，会频繁将缓冲日志写入临时文件。具体怎么设，有兴趣自行查询，我觉得研发大大根本没机会去设这个值的，了解即可。&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;(2)&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=0&lt;/code&gt;:表示刷新&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;时间点由操作系统自身来决定，操作系统自身会每隔一段时间就会刷新缓存数据到磁盘，这个性能最好。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，代表每次事务提交时就会刷新binlog到磁盘。&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;,代表每N个事务提交会进行一次binlog刷新。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，这里存在一个一致性问题，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=N&lt;/code&gt;，数据库在操作系统宕机的时候，可能数据并没有同步到磁盘，于是再次重启数据库，会带来数据丢失问题。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;当&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;，事务在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;commit&lt;/code&gt;的时候，数据写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;，但是还没写入事务日志(&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;redo log&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;undo log&lt;/code&gt;)。此时宕机，重启数据库，数据被回滚。但是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;里已经记录，这里存在不一致问题。这个事务日志和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;一致性的问题，大家可以查询mysql的内部XA协议，该协议就是解决这个一致性问题的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;误解二:binlog是InnoDb独有的&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是以事件形式记录的，这句话通俗点说，就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容都是一个个的事件。这块具体的我会在下一篇讲，这篇记住&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的内容就是一个个事件就行。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;注意了，这里的用词，是一个个事件，而不是事务。大家应该知道&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;Innodb&lt;/code&gt;和&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysiam&lt;/code&gt;最显著的区别就是一个支持事务，一个不支持事务。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此你可以说，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是基于事务来记录二进制日志，比如&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;sync_binlog=1&lt;/code&gt;,每提交一次事务，就写入&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。你却不能说&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;是事务日志，&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;不仅记录&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;innodb&lt;/code&gt;日志，在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;myisam&lt;/code&gt;中，也一样存在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;。&lt;/p&gt;&lt;h3 id=&quot;三个用途&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;三个用途&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;这三个用途，出自《MySQL技术内幕 InnoDB存储引擎》一书，分别为&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;、&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;。这三个用途，研发大大们了解一下即可，比如数据恢复，你碰到同事删库的机会实在太少。假如真的有同事舍己为人，冒着离职的风险给你提供做数据&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;的机会，大把运维工程师待命在那，轮不到你的。所以，这三个功能了解即可。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;恢复&lt;/strong&gt;：这里网上有大把的文章指导你，如何利用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志恢复数据库数据。如果你真的觉得自己很有时间，就自己去创建个库，然后删了，再去恢复一下数据，练练手吧。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;复制&lt;/strong&gt;: 如图所示（图片不是自己画的，偷懒了）&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;img src=&quot;https://www.cnblogs.com/images/cnblogs_com/rjzheng/1281019/o_youhua1.jpg&quot; alt=&quot;鹿晓鹏博客&quot; style=&quot;margin: 0px; padding: 0px; border: none; max-width: 800px; height: auto;&quot;/&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;主库有一个&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;log dump&lt;/code&gt;线程，将&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;传给从库&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;从库有两个线程，一个I/O线程，一个SQL线程，I/O线程读取主库传过来的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;内容并写入到&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;,SQL线程从&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;relay log&lt;/code&gt;里面读取内容，写入从库的数据库。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;审计&lt;/strong&gt;：用户可以通过二进制日志中的信息来进行审计，判断是否有对数据库进行注入攻击。&lt;/p&gt;&lt;h3 id=&quot;四个常识&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;四个常识&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识一:binlog常见格式&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;这块知识我用一个表格来表示，没必要啰嗦一大堆。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;format&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;定义&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;优点&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;缺点&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是修改SQL语句&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件小，节约IO，提高性能&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性差，对一些系统函数不能准确复制或不能复制，如now()、uuid()等&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;row&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;记录的是每行实际数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，能准确复制数据的变更&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;日志文件大，较大的网络IO和磁盘IO&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;mixed&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;statement和row模式的混合&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;准确性强，文件大小适中&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;有可能发生主从不一致问题&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;业内目前推荐使用的是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，准确性高，虽然说文件大，但是现在有SSD和万兆光纤网络，这些磁盘IO和网络IO都是可以接受的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;那么，大家一定想问，为什么不推荐使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mixed&lt;/code&gt;模式，理由如下&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;假设master有两条记录，而slave只有一条记录。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;master的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+------------------------------------------------------+
|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+------------------------------------------------------+
|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
|&amp;nbsp;2&amp;nbsp;|&amp;nbsp;ddd&amp;nbsp;|
+----+------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;slave的数据为&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;+----+-------------------------------------------------------+|&amp;nbsp;id&amp;nbsp;|&amp;nbsp;n&amp;nbsp;|
+----+-------------------------------------------------------+|&amp;nbsp;1&amp;nbsp;|&amp;nbsp;d24c2c7e-430b-11e7-bf1b-00155d016710&amp;nbsp;|
+----+-------------------------------------------------------+&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;当在&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;上更新一条从库不存在的记录时，也就是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;id=2&lt;/code&gt;的记录，你会发现&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;master&lt;/code&gt;是可以执行成功的。而&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;slave&lt;/code&gt;拿到这个SQL后，也会照常执行，不报任何异常，只是更新操作不影响行数而已。并且你执行命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;show slave status&lt;/code&gt;，查看输出，你会发现没有异常。但是，如果你是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;模式，由于这行根本不存在，是会报1062错误的。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识二:怎查看binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;本身是一类二进制文件。二进制文件更省空间，写入速度更快，是无法直接打开来查看的。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;因此mysql提供了命令&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;mysqlbinlog&lt;/code&gt;进行查看。&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;一般的&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;statement&lt;/code&gt;格式的二进制文件，用下面命令就可以&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;如果是&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;row&lt;/code&gt;格式，加上&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-v&lt;/code&gt;或者&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;-vv&lt;/code&gt;参数就行，如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;mysqlbinlog&amp;nbsp;-vv&amp;nbsp;mysql-bin.000001&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识三:怎么删binlog&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;删&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;的方法很多，有三种是常见的&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(1) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;reset master&lt;/code&gt;,该命令将会删除所有日志，并让日志文件重新从000001开始。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(2) 使用命令&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;PURGE&amp;nbsp;{&amp;nbsp;BINARY&amp;nbsp;|&amp;nbsp;MASTER&amp;nbsp;}&amp;nbsp;LOGS&amp;nbsp;{&amp;nbsp;TO&amp;nbsp;&amp;#39;log_name&amp;#39;&amp;nbsp;|&amp;nbsp;BEFORE&amp;nbsp;datetime_expr&amp;nbsp;}&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;例如&lt;/p&gt;&lt;pre style=&quot;margin-top: 10px; margin-bottom: 10px; padding: 0px; white-space: pre-wrap; overflow-wrap: break-word;&quot;&gt;purge&amp;nbsp;master&amp;nbsp;logs&amp;nbsp;to&amp;nbsp;&amp;quot;binlog_name.00000X&amp;quot;&lt;/pre&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;将会清空00000X之前的所有日志文件.&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;(3) 使用&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;--expire_logs_days=N&lt;/code&gt;选项指定过了多少天日志自动过期清空。&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;常识四:binlog常见参数&lt;/strong&gt;&lt;br style=&quot;margin: 0px; padding: 0px;&quot;/&gt;常见参数，列举如下，有个印象就好。&lt;/p&gt;&lt;table&gt;&lt;thead style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;header firstRow&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;参数名&lt;/th&gt;&lt;th style=&quot;margin: 0px; padding: 8px 14px; background-color: rgb(250, 250, 250); border-color: silver; border-collapse: collapse;&quot;&gt;含义&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin = {on | off | base_name}&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志或者指定一个日志路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sql_log_bin ={ on | off }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定是否启用记录二进制日志&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;expire_logs_days&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定自动删除二进制日志的时间，即日志过期时间&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;log_bin_index&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定mysql-bin.index文件的路径&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_format = { mixed | row | statement }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志基于什么模式记录&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志文件最大值&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定事务日志缓存区大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;even&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;max_binlog_cache_size&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定二进制日志缓存最大大小&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;odd&quot; style=&quot;margin: 0px; padding: 0px;&quot;&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;sync_binlog = { 0 | n }&lt;/td&gt;&lt;td style=&quot;margin: 0px; padding: 8px 14px; border-color: silver; border-collapse: collapse;&quot;&gt;指定写缓冲多少次，刷一次盘&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;思考题&quot; style=&quot;margin: 10px 0px; padding: 0px; font-size: 16px; line-height: 1.5;&quot;&gt;思考题&lt;/h3&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;请问，我说的&lt;/p&gt;&lt;ul style=&quot;margin-bottom: 1em; margin-left: 40px; padding: 0px;&quot; class=&quot; list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;一个定义&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;两个误解&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;三个用途&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong style=&quot;margin: 0px; padding: 0px;&quot;&gt;四个常识&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;说的是什么呢？&lt;/p&gt;&lt;p style=&quot;margin: 10px auto; padding: 0px; font-size: 15px !important;&quot;&gt;另外，我会在下一篇进行介绍，怎么用代码解析&lt;code style=&quot;margin: 1px 5px; padding: 0px 5px !important; color: rgb(221, 17, 68); line-height: 1.8; vertical-align: middle; display: inline-block; font-family: &amp;quot;Courier New&amp;quot;, sans-serif !important; font-size: 12px !important; background-color: rgb(245, 245, 245) !important; border: 1px solid rgb(204, 204, 204) !important; border-radius: 3px !important;&quot;&gt;binlog&lt;/code&gt;日志。&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;作者：孤独烟&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;margin: 0px; padding: 0px;&quot;&gt;出处：&lt;a href=&quot;http://rjzheng.cnblogs.com/&quot; target=&quot;_blank&quot; style=&quot;margin: 0px; padding: 0px; color: rgb(0, 0, 0); text-decoration-line: none;&quot;&gt;&amp;nbsp;http://rjzheng.cnblogs.com/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。如果觉得还有帮助的话，可以点一下右下角的&lt;a style=&quot;margin: 0px; padding: 0px;&quot;&gt;【推荐】&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;/p&gt;' WHERE `aid` = 33 [ RunTime:0.0087s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0008s ]
SQL: DELETE FROM `lxp_article_tag` WHERE `aid` = 33 [ RunTime:0.0032s ]
SQL: INSERT INTO `lxp_article_tag` (`aid`,`tid`) VALUES ('33','26') [ RunTime:0.0076s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0008s ]
SQL: DELETE FROM `lxp_article_pic` WHERE `aid` = 33 [ RunTime:0.0011s ]
SQL: INSERT INTO `lxp_article_pic` (`aid`,`path`) VALUES ('33','/Upload/image/ueditor/mysql.jpg') [ RunTime:0.0051s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000031s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000084s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006212s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006238s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000095s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000115s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000455s ]
INFO: [ app_end ] --END-- [ RunTime:0.000481s ]

[ 2018-12-14T18:34:43+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/33
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000276s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000344s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000370s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0010s ]
SQL: SELECT * FROM `lxp_article` WHERE `aid` = 33 LIMIT 1   [ RunTime:0.0014s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT `tid` FROM `lxp_article_tag` WHERE `aid` = 33  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0006s ]
SQL: SELECT `cid`,`cid`,`cname`,`keywords` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0007s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0007s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000063s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000102s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.008825s ]
INFO: [ view_parse ] --END-- [ RunTime:0.008857s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000112s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000138s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000358s ]
INFO: [ app_end ] --END-- [ RunTime:0.000385s ]

[ 2018-12-14T18:36:43+08:00 ] 223.72.56.190 /index.php/Admin/Index/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000274s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000325s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000351s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000077s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000105s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.005953s ]
INFO: [ view_parse ] --END-- [ RunTime:0.005979s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000101s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000120s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000348s ]
INFO: [ app_end ] --END-- [ RunTime:0.000371s ]

[ 2018-12-14T18:36:44+08:00 ] 223.72.56.190 /Admin/Index/welcome
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000272s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000330s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000373s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0013s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_delete` = 1 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_show` = 0 LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_chat` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` WHERE `is_delete` = 1 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_chat` WHERE `is_show` = 0 LIMIT 1   [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_comment` [ RunTime:0.0014s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_comment` LIMIT 1   [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000058s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000134s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.005841s ]
INFO: [ view_parse ] --END-- [ RunTime:0.005875s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000155s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000181s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000603s ]
INFO: [ app_end ] --END-- [ RunTime:0.000636s ]

[ 2018-12-14T18:36:45+08:00 ] 223.72.56.190 /Admin/Article/add
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000226s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000318s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000347s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0009s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0029s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0005s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0005s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000067s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000100s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.004652s ]
INFO: [ view_parse ] --END-- [ RunTime:0.004676s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000098s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000117s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000427s ]
INFO: [ app_end ] --END-- [ RunTime:0.000455s ]

[ 2018-12-14T18:36:46+08:00 ] 223.72.56.190 /Admin/Article/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000012s ]
INFO: [ app_init ] --END-- [ RunTime:0.000320s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000386s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000420s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0013s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article` WHERE `is_delete` = 0 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article` WHERE `is_delete` = 0 ORDER BY addtime desc LIMIT 0,15   [ RunTime:0.0057s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0010s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0007s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '34'  [ RunTime:0.0005s ]
SQL: SHOW COLUMNS FROM `lxp_article_pic` [ RunTime:0.0017s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 34 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0004s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0009s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0004s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '33'  [ RunTime:0.0006s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 33 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '32'  [ RunTime:0.0007s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 32 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '31'  [ RunTime:0.0006s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 31 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '30'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 30 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '27'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 27 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '26'  [ RunTime:0.0006s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 26 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '25'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 25 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0003s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '23'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 23 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 33  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '24'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 24 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 34  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '22'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 22 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '21'  [ RunTime:0.0003s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 21 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 31  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '20'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 20 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '19'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 19 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 30  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '18'  [ RunTime:0.0004s ]
SQL: SELECT `path` FROM `lxp_article_pic` WHERE `aid` = 18 ORDER BY ap_id asc LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT `cid`,`cid`,`cname` FROM `lxp_category` WHERE `cid` = 29  [ RunTime:0.0002s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000064s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000120s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.006747s ]
INFO: [ view_parse ] --END-- [ RunTime:0.006800s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000207s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000238s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000594s ]
INFO: [ app_end ] --END-- [ RunTime:0.000638s ]

[ 2018-12-14T18:37:39+08:00 ] 223.72.56.190 /Admin/Article/edit/aid/22
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000024s ]
INFO: [ app_init ] --END-- [ RunTime:0.000289s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000593s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000623s ]
SQL: SHOW COLUMNS FROM `lxp_article` [ RunTime:0.0010s ]
SQL: SELECT * FROM `lxp_article` WHERE `aid` = 22 LIMIT 1   [ RunTime:0.0006s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0012s ]
SQL: SELECT `tid` FROM `lxp_article_tag` WHERE `aid` = 22  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT * FROM `lxp_article_tag` INNER JOIN lxp_tag ON lxp_article_tag.tid=lxp_tag.tid  WHERE `aid` = '22'  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_category` [ RunTime:0.0006s ]
SQL: SELECT `cid`,`cid`,`cname`,`keywords` FROM `lxp_category` WHERE `cid` = 32  [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_category` ORDER BY sort  [ RunTime:0.0002s ]
SQL: SHOW COLUMNS FROM `lxp_tag` [ RunTime:0.0050s ]
SQL: SELECT * FROM `lxp_tag`  [ RunTime:0.0003s ]
SQL: SHOW COLUMNS FROM `lxp_article_tag` [ RunTime:0.0006s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 21 LIMIT 1   [ RunTime:0.0004s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 22 LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 23 LIMIT 1   [ RunTime:0.0007s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 24 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 25 LIMIT 1   [ RunTime:0.0003s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_article_tag` WHERE `tid` = 26 LIMIT 1   [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000080s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000130s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.008990s ]
INFO: [ view_parse ] --END-- [ RunTime:0.009034s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000195s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000230s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000528s ]
INFO: [ app_end ] --END-- [ RunTime:0.000567s ]

[ 2018-12-14T18:43:50+08:00 ] 223.72.56.190 /Admin/Comment/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000011s ]
INFO: [ app_init ] --END-- [ RunTime:0.000277s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000401s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000456s ]
SQL: SHOW COLUMNS FROM `lxp_comment` [ RunTime:0.0022s ]
SQL: SELECT COUNT(*) AS tp_count FROM lxp_comment c INNER JOIN lxp_article a ON a.aid=c.aid INNER JOIN lxp_oauth_user ou ON ou.id=c.ouid  WHERE c.is_delete = 0 LIMIT 1   [ RunTime:0.0004s ]
SQL: SELECT c.*,a.title,ou.nickname FROM lxp_comment c INNER JOIN lxp_article a ON a.aid=c.aid INNER JOIN lxp_oauth_user ou ON ou.id=c.ouid  WHERE c.is_delete = 0 ORDER BY date desc LIMIT 0,15   [ RunTime:0.0008s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000058s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000101s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.005784s ]
INFO: [ view_parse ] --END-- [ RunTime:0.005819s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000137s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000156s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000382s ]
INFO: [ app_end ] --END-- [ RunTime:0.000405s ]

[ 2018-12-14T18:43:51+08:00 ] 223.72.56.190 /Admin/User/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000237s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000279s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000304s ]
SQL: SHOW COLUMNS FROM `lxp_oauth_user` [ RunTime:0.0009s ]
SQL: SELECT COUNT(*) AS tp_count FROM `lxp_oauth_user` LIMIT 1   [ RunTime:0.0002s ]
SQL: SELECT * FROM `lxp_oauth_user` ORDER BY last_login_time desc LIMIT 0,20   [ RunTime:0.0002s ]
NOTIC: [2] Invalid argument supplied for foreach() /www/wwwroot/blog/Application/Common/Model/OauthUserModel.class.php 第 66 行.
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000042s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000088s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.005142s ]
INFO: [ view_parse ] --END-- [ RunTime:0.005166s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000154s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000175s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000385s ]
INFO: [ app_end ] --END-- [ RunTime:0.000407s ]

[ 2018-12-14T18:43:53+08:00 ] 223.72.56.190 /Admin/Config/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000009s ]
INFO: [ app_init ] --END-- [ RunTime:0.000256s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000275s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000301s ]
SQL: SHOW COLUMNS FROM `lxp_config` [ RunTime:0.0029s ]
SQL: SELECT `name`,`value` FROM `lxp_config`  [ RunTime:0.0020s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000123s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000160s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.008655s ]
INFO: [ view_parse ] --END-- [ RunTime:0.008684s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000149s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000170s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000334s ]
INFO: [ app_end ] --END-- [ RunTime:0.000362s ]

[ 2018-12-14T18:43:54+08:00 ] 223.72.56.190 /Admin/Config/index
INFO: [ app_init ] --START--
INFO: Run Behavior\BuildLiteBehavior [ RunTime:0.000010s ]
INFO: [ app_init ] --END-- [ RunTime:0.000288s ]
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000285s ]
INFO: [ app_begin ] --END-- [ RunTime:0.000338s ]
SQL: SHOW COLUMNS FROM `lxp_config` [ RunTime:0.0012s ]
SQL: SELECT `name`,`value` FROM `lxp_config`  [ RunTime:0.0003s ]
INFO: [ view_parse ] --START--
INFO: [ template_filter ] --START--
INFO: Run Behavior\ContentReplaceBehavior [ RunTime:0.000124s ]
INFO: [ template_filter ] --END-- [ RunTime:0.000156s ]
INFO: Run Behavior\ParseTemplateBehavior [ RunTime:0.007606s ]
INFO: [ view_parse ] --END-- [ RunTime:0.007631s ]
INFO: [ view_filter ] --START--
INFO: Run Behavior\WriteHtmlCacheBehavior [ RunTime:0.000100s ]
INFO: [ view_filter ] --END-- [ RunTime:0.000119s ]
INFO: [ app_end ] --START--
INFO: Run Behavior\ShowPageTraceBehavior [ RunTime:0.000351s ]
INFO: [ app_end ] --END-- [ RunTime:0.000378s ]

